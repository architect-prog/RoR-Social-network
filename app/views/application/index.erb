<% if user_signed_in? %>
  <h1>Your page</h1><br>
  Firstname: <%= current_user.firstname %><br>
  Lastname: <%= current_user.lastname %><br>
  Email: <%= current_user.email %><br><br>
  <h5>You have <%= current_user.followers.count %> followers</h5>
  <%= link_to 'Posts', user_posts_path(current_user.id) %> |
  <%= link_to 'Users', users_path %><br> 
  <h1>You followed on:</h1><br>

  <ol>
    <% current_user.following.each do |followed| %>
      
      <p>~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</p>

      <li>Firstname: <%= followed.firstname %><br>
      Lastname: <%= followed.lastname %>   
     
      <% if followed.posts.count != 0 %>
        <table>
        <thead>
          <tr>
            <th>Title</th>
            <th>Body</th>
            <th colspan="3"></th>
          </tr>
        </thead>

        <tbody>       
          <% followed.posts.each do |post| %>
            <tr>
              <td><%= post.title %></td>
              <td><%= post.body %></td>
              <td><%= link_to 'Show', user_post_path(followed.id, post.id) %></td>              
            </tr>
          <% end %>
        </tbody>      
      </table>   
    <% else %>  
      <h3>This user has no post</h3>
    <% end %>     
  <% end %>  
  </ol>
  
  <%= link_to 'Sign out', destroy_user_session_path, :method => :delete %><br>   

<% else %>
  <%= link_to 'Sign in', new_user_session_path %><br>
   <%= link_to 'Registration', new_user_registration_path %>
<% end %>